<div>

  <!-- header  -->
  <header class="bg-gray-800 text-white">
    <div class="container mx-auto p-4 flex justify-between items-center">
      <!-- Logo -->
      <div class="text-2xl font-bold">
        <a href="#" class="hover:text-gray-400"> Health Challenge Tracker</a>
      </div>

      <!-- Navigation - Desktop -->
      <nav class="hidden md:flex space-x-4">
        <a *ngFor="let link of navLinks" [href]="link.url" class="nav-link">{{ link.label }}</a>
      </nav>

      <!-- Mobile Menu Button -->
      <button class="md:hidden text-3xl focus:outline-none" (click)="toggleMenu()">
        &#9776;
      </button>
    </div>

    <!-- Mobile Menu -->
    <div class="md:hidden" [ngClass]="{ 'block': isMenuOpen, 'hidden': !isMenuOpen }">
      <nav class="bg-gray-700 p-4">
        <a *ngFor="let link of navLinks" [href]="link.url" class="block py-2 hover:text-gray-400">{{ link.label }}</a>
      </nav>
    </div>
  </header>

  <!-- body  -->

  <div class="bg-gray-100 p-6 flex">
    <div class="max-w-md bg-white p-6 rounded-lg shadow-md w-full md:w-1/3">
      <h2 class="text-xl font-semibold mb-4">Workout Form</h2>
      <form class="space-y-5" [formGroup]="form" (ngSubmit)="submitForm()" novalidate>
        <div class="grid grid-cols-1 gap-5 md:grid-cols-3">
          <div [ngClass]="isSubmitForm ? form.controls['userName'].errors ? 'has-error' : 'has-success' : ''">
            <label for="customeEmail">Username</label>
            <div class="flex">
              <div
                class="flex items-center justify-center border border-[#e0e6ed] bg-[#eee] px-3 font-semibold ltr:rounded-l-md ltr:border-r-0 rtl:rounded-r-md rtl:border-l-0 dark:border-[#17263c] dark:bg-[#1b2e4b]">
                @
              </div>
              <input id="customeEmail" type="text" placeholder="Enter Username"
                class="form-input ltr:rounded-l-none rtl:rounded-r-none" formControlName="userName" />
            </div>
            <ng-container *ngIf="isSubmitForm && !form.controls['userName'].errors">
              <p class="mt-1 text-[#1abc9c]">Looks Good!</p>
            </ng-container>
            <ng-container *ngIf="isSubmitForm && form.controls['userName'].errors">
              <p class="mt-1 text-danger">Required</p>
            </ng-container>
          </div>
        </div>
        <div class="grid grid-cols-1 gap-5 md:grid-cols-4">
          <div class="md:col-span-2"
            [ngClass]="isSubmitForm ? form.controls['workoutType'].errors ? 'has-error' : 'has-success' : ''">
            <label for="customeCity">Workout Type</label>
            <div class=" grid grid-cols-1">
              <div *ngFor="let option of workoutType;" class="flex mb-2"><br>
                <div
                  class="bg-[#f1f2f3] dark:bg-[#1b2e4b] flex justify-center items-center ltr:rounded-l-md rtl:rounded-r-md px-3 font-semibold border ltr:border-r-0 rtl:border-l-0 border-[#e0e6ed] ">
                  <input type="radio" [value]="option" formControlName="workoutType" name="workoutType"
                    class="form-radio  border-[#e0e6ed]  ltr:mr-0 rtl:ml-0 " />
                </div>
                <input type="text" name="workoutType"
                  class="form-input ltr:rounded-l-none rtl:rounded-r-none font-semibold " [value]="option" readonly />
              </div>
              <ng-container *ngIf="isSubmitForm && !form.controls['workoutType'].errors">
                <p class="mt-1 text-[#1abc9c]">Looks Good!</p>
              </ng-container>
              <ng-container *ngIf="isSubmitForm && form.controls['workoutType'].errors">
                <p class="mt-1 text-danger">Required</p>
              </ng-container>
            </div>
          </div>
        </div>
        <div class="grid grid-cols-1 gap-5 md:grid-cols-5">
          <div class="md:col-span-2"
            [ngClass]="isSubmitForm ? form.controls['time'].errors ? 'has-error' : 'has-success' : ''">
            <label for="customeCity">Workout Minutes</label>
            <div class="mb-5">
              <div class="flex">
                <input type="text" formControlName="time" placeholder="Enter workout minutes"
                  class="form-input ltr:rounded-r-none rtl:rounded-l-none" />
                <div
                  class="bg-[#eee] flex justify-center items-center ltr:rounded-r-md rtl:rounded-l-md px-3 font-semibold border ltr:border-l-0 rtl:border-r-0 border-[#e0e6ed] dark:border-[#17263c] dark:bg-[#1b2e4b]">
                  Minute
                </div>
              </div>
              <ng-container *ngIf="isSubmitForm && !form.controls['time'].errors">
                <p class="mt-1 text-[#1abc9c]">Looks Good!</p>
              </ng-container>
              <ng-container *ngIf="isSubmitForm && form.controls['time'].errors">
                <p class="mt-1 text-danger">Required</p>
              </ng-container>
            </div>

          </div>
        </div>
        <button type="submit" class="btn btn-outline-primary mb-8 ">Add Workout</button>
      </form>
    </div>

    <div class="bg-white p-6 rounded-lg shadow-md flex-grow ml-6">
      <h2 class="text-xl font-semibold mb-4">User Workout List</h2>
      <div class="flex justify-end mb-2">
        <input [(ngModel)]="search" type="text" class="form-input" placeholder="Search..." />
      </div>
      <ng-datatable [rows]="transformedRows" [columns]="cols" [search]="search" [sortable]="true">
        <ng-template slot="totalMinutes" let-value="data">
          <div class="flex items-center font-semibold">
            {{ +value.totalMinutes }}
          </div>
        </ng-template>
        <ng-template slot="analysis" let-value="data">
          <div class="flex items-center justify-center gap-4">
            <a ngxTippy data-tippy-content="Show Analysis" class="cursor-pointer" (click)="open(value)">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                class="bi bi-eye hover:text-orange-500" viewBox="0 0 16 16">
                <path
                  d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z" />
                <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0" />
              </svg>
            </a>
          </div>
        </ng-template>
      </ng-datatable>
    </div>
  </div>



  <!-- Footer -->
  <footer class="bg-gray-900 text-gray-400 text-center py-4">
    <p>&copy; {{ currentYear }} {{ createdBy }}</p>
  </footer>
</div>


<modal #displayChartModal class="modal-top large-modal">
  <ng-template #modalHeader>
    <div>{{userName}}'s Workout Progress</div>
  </ng-template>
  <ng-template #modalBody>

    <div id="chart" *ngIf="chartOptions">
      <apx-chart [series]="chartOptions.series" [chart]="chartOptions.chart" [labels]="chartOptions.labels"
        [responsive]="chartOptions.responsive"></apx-chart>
    </div>
  </ng-template>
  <ng-template #modalFooter>
    <button type="button" (click)="displayChartModal.close()" class="btn btn-outline-danger">Discard</button>
  </ng-template>
</modal>